<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>BlackPoker 8th - Entry20 最小プレー（PCブラウザ）</title>
<style>
  :root{--bg:#0f1221;--card:#1a203a;--ui:#141a2f;--line:#2c355d;--text:#e8ebff;--muted:#a9b3e6;--accent:#8ad1ff;}
  *{box-sizing:border-box}
  body{margin:0;background:linear-gradient(180deg,#0b0f1d,#0f1221 40%,#0b0f1d);color:var(--text);font-family:ui-sans-serif,system-ui,Segoe UI,Helvetica,Arial,"Hiragino Kaku Gothic ProN","Noto Sans JP",Meiryo,sans-serif}
  header{padding:12px 16px;border-bottom:1px solid var(--line);background:#0c1020;position:sticky;top:0;z-index:10}
  h1{font-size:18px;margin:0}
  #root{display:grid;grid-template-columns:1fr 380px;gap:12px;min-height:100vh}
  .board{padding:12px}
  .sidebar{border-left:1px solid var(--line);background:#0c1020;display:flex;flex-direction:column;min-height:0}
  .zone{border:1px solid var(--line);border-radius:12px;background:var(--card);padding:8px;margin-bottom:10px}
  .zone h3{font-size:13px;margin:0 0 6px;color:var(--muted);display:flex;justify-content:space-between;align-items:center}
  .row{display:flex;gap:8px;flex-wrap:wrap}
  .char{border:1px solid var(--line);border-radius:10px;padding:6px;background:#161b31;min-width:96px;min-height:120px;display:flex;align-items:center;justify-content:center}
  .char.drive{opacity:.7;transform:skewX(-6deg)}
  .char.mine{outline:1px solid #4fc3f7}
  .char.sel{box-shadow:0 0 0 2px var(--accent) inset}
  .card{border:1px solid var(--line);border-radius:8px;background:#0f152d;min-width:82px;min-height:116px;padding:4px;display:flex;align-items:center;justify-content:center;cursor:pointer}
  .card:hover{outline:2px solid var(--accent)}
  .hand{display:flex;gap:8px;flex-wrap:wrap}
  .log{flex:1;overflow:auto;padding:8px;font-family:ui-monospace,Menlo,Consolas,monospace;font-size:12px;white-space:pre-wrap}
  .pill{padding:2px 8px;border-radius:999px;background:#101635;border:1px solid var(--line);font-size:12px}
  .header-row{display:flex;justify-content:space-between;align-items:center}
  .toprow,.bottomrow{display:grid;grid-template-columns:1fr;gap:10px;margin-bottom:10px}
  .num{font-variant-numeric:tabular-nums}
  .hint{color:#b7c0ec;font-size:12px}
  .sep{height:6px}
  button{background:#1c2442;color:var(--text);border:1px solid var(--line);padding:8px 10px;border-radius:10px;cursor:pointer}
  button.primary{background:#1c3461;border-color:#34518d}
  button:disabled{opacity:.5;cursor:not-allowed}
  img.cardimg{width:90px;height:auto;display:block}
  img.handimg{width:72px;height:auto;display:block}
</style>
</head>
<body>
<header class="header-row">
  <h1>BlackPoker 8th｜Entry20 最小プレー（2人対戦・ローカル）</h1>
  <div class="pill" id="turnInfo">準備中…</div>
</header>
<div style="padding:8px 16px;display:flex;gap:16px;align-items:center;border-bottom:1px solid var(--line);background:#0c1020;">
  <label class="hint"><input type="checkbox" id="cpuMode" checked> CPU対戦（P2がNPC）</label>
  <label class="hint" style="display:inline-flex;align-items:center;gap:6px;">難易度
    <select id="cpuLevel">
      <option value="easy">EASY</option>
      <option value="normal" selected>NORMAL</option>
      <option value="hard">HARD</option>
    </select>
  </label>
  <span class="hint">・CPUは簡易AIで行動します（防壁→召喚→攻撃→エンド）。</span>
</div>
<div id="root">
  <main class="board" id="board">
    <!-- プレイヤー表示ゾーン（あなたの既存コード通り） -->
    <section class="zone">
      <h3>プレイヤー2（上） <span>ライフ:<span class="num" id="p1Life">-</span>｜手札:<span class="num" id="p1Hand">-</span>｜墓地:<span class="num" id="p1Grave">-</span></span></h3>
      <div class="toprow">
        <div>
          <div class="hint">場（上段：P2のキャラクター）</div>
          <div class="row" id="p1Field"></div>
        </div>
      </div>
    </section>
    <section class="zone">
      <h3>プレイヤー1（下・現在の手札表示） <span>ライフ:<span class="num" id="p0Life">-</span>｜手札:<span class="num" id="p0Hand">-</span>｜墓地:<span class="num" id="p0Grave">-</span></span></h3>
      <div class="bottomrow">
        <div>
          <div class="hint">場（下段：P1のキャラクター）</div>
          <div class="row" id="p0Field"></div>
        </div>
        <div>
          <div class="hint">手札（現在ターンプレイヤーのみ表示）</div>
          <div class="hand" id="hand"></div>
        </div>
      </div>
    </section>
  </main>
  <aside class="sidebar">
    <div class="zone">
      <div class="header-row">
        <h3>アクション</h3>
        <label class="hint"><input type="checkbox" id="useEntry20" checked> Entry20デッキ</label>
      </div>
      <div class="btns" style="display:grid;grid-template-columns:repeat(2,1fr);gap:8px">
        <button id="btnBulwark" class="primary">防壁設置（$L）</button>
        <button id="btnSoldier" class="primary">兵士召喚（$BL）</button>
        <button id="btnHero" class="primary">英雄召喚（$BBL）</button>
        <button id="btnAce" class="primary">エース召喚（$L）</button>
        <button id="btnAttack">アタック</button>
        <button id="btnEnd">エンド</button>
      </div>
      <div class="sep"></div>
      <div class="row">
        <button id="btnStart" class="primary">ゲーム開始</button>
        <button id="btnReset">リセット</button>
      </div>
      <div class="sep"></div>
      <div class="hint">・各アクションはクリック後に対象選択の案内が出ます。<br>・アタック→ブロック→ダメージ判定は自動で順に処理します。</div>
    </div>
    <div class="zone" style="min-height:240px;">
      <h3>ログ</h3>
      <div id="log" class="log"></div>
    </div>
    <!-- ★ここから追加 -->
    <div class="zone" style="flex:0 0 auto;max-height:260px;overflow:auto;">
      <h3>ルール説明</h3>
      <div class="hint">
        ・各プレイヤーは山札をライフとして持つ<br>
        ・ライフが0になると敗北<br>
        ・ターンごとにドローし、アクションを行う<br>
        <br>
        【アクション】<br>
        ・防壁設置（$L）: ライフ1枚消費＋手札1枚を防壁に<br>
        ・兵士召喚（$BL）: 防壁1体＋ライフ1枚消費、手札から2〜10<br>
        ・英雄召喚（$BBL）: 防壁2体＋ライフ1枚消費、手札からJ/Q/K<br>
        ・エース召喚（$L）: ライフ1枚消費、手札からA<br>
        ・アタック: 自分のキャラで攻撃<br>
        ・ブロック: 防壁や兵士で防御<br>
        <br>
        【勝敗条件】<br>
        ・ライフが尽きたら負け<br>
        ・同時に0なら引き分け
      </div>
    </div>
    <!-- ★ここまで追加 -->
  </aside>
</div>

<script>
// ========= ルール準拠の最小実装（画像カード対応版） =========
// （ここに前回の完全版JavaScript全部をそのまま貼り付けてください）
// CPU制御やrender関数など含めて、既に完成済みのスクリプトを差し替え不要で利用できます。
</script>
</body>
</html>
